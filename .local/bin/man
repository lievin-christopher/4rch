#!/bin/bash
num=$1
if [ ! -z "${num##*[!0-9]*}" ]; then
    manpage=$(find /usr/share/man/fr -name "$2.$1.*" | head -n 1)
    if [ ! -z "$manpage" ]; then
        /usr/lib/man-db/zsoelim $manpage | /usr/lib/man-db/manconv -f UTF-8:ISO-8859-1 -t UTF-8//IGNORE | preconv -e UTF-8 | tbl | nroff -mandoc -rLL=265n -rLT=265n -Tutf8 | less
    else
        echo "Aucune entrée de manuel pour $1 en section $1"
    fi
else
    manpage=$(find /usr/share/man/fr -name "$1.1.*" | head -n 1)
    if [ ! -z "$manpage" ]; then
        /usr/lib/man-db/zsoelim $manpage | /usr/lib/man-db/manconv -f UTF-8:ISO-8859-1 -t UTF-8//IGNORE | preconv -e UTF-8 | tbl | nroff -mandoc -rLL=265n -rLT=265n -Tutf8 | less
    else
        manpage=$(find /usr/share/man/fr -name "$1.*" | head -n 1)
        if [ ! -z "$manpage" ]; then
            /usr/lib/man-db/zsoelim $manpage | /usr/lib/man-db/manconv -f UTF-8:ISO-8859-1 -t UTF-8//IGNORE | preconv -e UTF-8 | tbl | nroff -mandoc -rLL=265n -rLT=265n -Tutf8 | less
        else
            echo "Aucune entrée de manuel pour $1"
        fi
    fi
fi
